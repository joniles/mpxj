<!DOCTYPE html>
<!--
 | Generated by Apache Maven Doxia Site Renderer 1.9.2 from src\site\markdown/howto-build.md
 | Rendered using Apache Maven Fluido Skin 1.9
-->
<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="generator" content="Apache Maven Doxia Site Renderer 1.9.2" />
    <title>MPXJ &#x2013; How To: Build MPXJ</title>
    <link rel="stylesheet" href="./css/apache-maven-fluido-1.9.min.css" />
    <link rel="stylesheet" href="./css/site.css" />
    <link rel="stylesheet" href="./css/print.css" media="print" />
    <script src="./js/apache-maven-fluido-1.9.min.js"></script>
    <!-- Google Analytics -->
    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
       (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
            m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
      ga('create', 'UA-7202224-1', 'auto');
      ga('send', 'pageview');
      ga('set', 'anonymizeIp', true);
      ga('set', 'forceSSL', true);
    </script>
  </head>
  <body class="topBarDisabled">
    <a href="https://github.com/joniles/mpxj">
      <img style="position: absolute; top: 0; right: 0; border: 0; z-index: 10000;"
        src="https://s3.amazonaws.com/github/ribbons/forkme_right_darkblue_121621.png"
        alt="Fork me on GitHub">
    </a>
    <div class="container-fluid">
      <header>
        <div id="banner">
          <div class="pull-left"><div id="bannerLeft"><h2>MPXJ</h2>
</div>
</div>
          <div class="pull-right"></div>
          <div class="clear"><hr/></div>
        </div>

        <div id="breadcrumbs">
          <ul class="breadcrumb">
        <li id="publishDate">Last Published: 2021-04-20</li>
          </ul>
        </div>
      </header>
      <div class="row-fluid">
        <header id="leftColumn" class="span3">
          <nav class="well sidebar-nav">
  <ul class="nav nav-list">
   <li class="nav-header">MPXJ</li>
    <li><a href="index.html" title="Overview"><span class="none"></span>Overview</a></li>
    <li><a href="changes-report.html" title="Changes"><span class="none"></span>Changes</a></li>
    <li><a href="getting-started.html" title="Getting started..."><span class="icon-chevron-down"></span>Getting started...</a>
     <ul class="nav nav-list">
      <li><a href="howto-start.html" title="Get started"><span class="none"></span>Get started</a></li>
      <li><a href="java-versions.html" title="Java versions"><span class="none"></span>Java versions</a></li>
      <li class="active"><a href="#"><span class="none"></span>Build MPXJ</a></li>
      <li><a href="howto-dotnet.html" title="Use MPXJ with .Net"><span class="none"></span>Use MPXJ with .Net</a></li>
      <li><a href="howto-com.html" title="Use MPXJ with COM"><span class="none"></span>Use MPXJ with COM</a></li>
      <li><a href="howto-convert.html" title="Convert files"><span class="none"></span>Convert files</a></li>
     </ul></li>
    <li><a href="howto-read.html" title="How to read..."><span class="icon-chevron-right"></span>How to read...</a></li>
    <li><a href="howto-write.html" title="How to write..."><span class="icon-chevron-right"></span>How to write...</a></li>
    <li><a href="field-guide.html" title="Field Guide"><span class="none"></span>Field Guide</a></li>
    <li><a href="mpp-field-guide.html" title="MPP Field Guide"><span class="none"></span>MPP Field Guide</a></li>
    <li><a href="faq.html" title="FAQ"><span class="none"></span>FAQ</a></li>
    <li><a href="users.html" title="Users"><span class="none"></span>Users</a></li>
   <li class="nav-header">Project Documentation</li>
    <li><a href="project-info.html" title="Project Information"><span class="icon-chevron-right"></span>Project Information</a></li>
    <li><a href="project-reports.html" title="Project Reports"><span class="icon-chevron-right"></span>Project Reports</a></li>
  </ul>
          </nav>
          <div class="well sidebar-nav">
            <hr />
            <div id="poweredBy">
              <div class="clear"></div>
              <div class="clear"></div>
              <div class="clear"></div>
<a href="http://maven.apache.org/" title="Built by Maven" class="poweredBy"><img class="builtBy" alt="Built by Maven" src="./images/logos/maven-feather.png" /></a>
            </div>
          </div>
        </header>
        <main id="bodyColumn"  class="span9" >
<section>
<h2><a name="How_To:_Build_MPXJ"></a>How To: Build MPXJ</h2>
<p>Although MPXJ can be downloaded as a complete package from Maven, GitHub and SourceForge, the development of the library continues between releases and is driven by user requests for new functionality and bug fixes being applied to existing features. Many MPXJ users will work with and ship software based on intermediate versions of MPXJ built from the code on GitHub in order to take advantage of these enhancements before they become available in an official release. This approach is supported by the fact that code is only pushed to the master branch on GitHub if the suite of regression tests have been completed successfully: therefore the quality of the code taken from GitHub at any point can normally be guaranteed to be as good as that in an official release.</p>
<p>In order to take advantage of MPXJ functionality from GitHub, you will need to understand how to build the library, whether you are using it in the form of a Java JAR or a .NET DLL. The following sections explain how to do this.</p><section>
<h3><a name="Obtaining_the_source"></a>Obtaining the source</h3>
<p>The first step in the process of building your own version of MPXJ is to obtain the latest source from GitHub. The MPXJrepository is on GitHub <a class="externalLink" href="https://github.com/joniles/mpxj" target="_blank">here</a>. Instructions for cloning the repository can be found on this page.</p></section><section>
<h3><a name="Building_the_Java_JAR"></a>Building the Java JAR</h3>
<p>MPXJ is now built using Maven. Once you have a cloned copy of the MPXJ repository, you may wish to update the <code>groupId</code>, <code>artifactId</code> or <code>version</code> attributes in <code>pom.xml</code>. This will ensure that there is no confusion between the version of MPXJ you build and the official distributions.</p>
<p>If you have a copy of Maven installed, you can issue the following command to build MPXJ:</p>

<div class="source">
<div class="source"><pre class="prettyprint">mvn -DskipTests=true -Dmaven.javadoc.skip=true -Dsource.skip=true package
</pre></div></div>

<p>This will generate the <code>mpxj.jar</code> for you in the Maven target directory, and copies MPXJs dependencies to the <code>lib</code> directory. Note that for convenience this skips running the unit tests, javadoc generation and source packaging.</p>
<p>If you are using Maven to manage dependencies for your own project, you can install your newly built version of MPXJ in a local Maven repository:</p>

<div class="source">
<div class="source"><pre class="prettyprint">mvn -DskipTests=true -Dmaven.javadoc.skip=true -Dsource.skip=true install
</pre></div></div>
</section><section>
<h3><a name="Building_the_.NET_DLLs"></a>Building the .NET DLLs</h3>
<p>Building the .NET DLL version of MPXJ uses an Ant script to first run Maven to create the Java version, then run IKVM to create a .Net version.</p>
<ul>

<li>Download <a class="externalLink" href="http://www.ikvm.net/">IKVM</a> and unzip the files into a convenient directory</li>
<li>Change directory to the MPXJ folder.</li>
<li>Edit the <code>build.xml</code> file and ensure that the property named <code>ikvm.dir</code> is set to point to the location where you have unzipped IKVM.</li>
</ul>
<p>You can now issue the following command:</p>

<div class="source">
<div class="source"><pre class="prettyprint">ant archive
</pre></div></div>

<p>The Ant script will recognise that IKVM is present and build the .NET DLL in the lib.net folder.</p></section><section>
<h3><a name="Generating_the_JAXB_code"></a>Generating the JAXB code</h3>
<p>In order to read and write various XML file formats, MPXJ relies on code generated by the JAXB tool <code>xjc</code> from the XML schema for each file format. Normally you will not need to regenerate this source, but if you are changing the JAXB implementation, or modifying the use of JAXB in some way, then you may need to regenerate this code.</p>
<p>Where I have created an XML schema to support a particular file format, I have included it in the MPXJ distribution in the <code>jaxb</code> directory. For XML schemas published by product vendors, I have included a note on the home page indicating where these can be located.</p>
<p>If you obtain a copy of the XML schema file you want to work with, you can update<br />
the JAXB source using the <code>xjc</code> target found in the ant <code>build.xml</code> file. Note that the <code>xjc</code> target is platform specific, you will need to change the name of <code>xjc</code> tool to be <code>xjc.bat</code>, <code>xjc.exe</code>, or <code>xjc.sh</code> depending on your operating system. You will also need to set the properties indicated in <code>build.xml</code> to tell it where to find <code>xjc</code> and the XML schema file. If you are only regenerating source for one of the XML schemas, you can comment out the others in the Ant script to avoid unnecessary work.</p></section></section>
        </main>
      </div>
    </div>
    <hr/>
    <footer>
      <div class="container-fluid">
        <div class="row-fluid">
            <p>&#169;      2000&#x2013;2021
<a href="http://mpxj.org">Packwood Software</a>
</p>
        </div>
      </div>
    </footer>
  </body>
</html>
